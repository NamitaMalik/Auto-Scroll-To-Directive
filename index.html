<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Auto-Scroll-To Directive by NamitaMalik</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Auto-Scroll-To Directive</h1>
      <h2 class="project-tagline">This repository discusses about a sample directive for automatically scrolling to a particular element.</h2>
      <a href="https://github.com/NamitaMalik/Auto-Scroll-To-Directive" class="btn">View on GitHub</a>
      <a href="https://github.com/NamitaMalik/Auto-Scroll-To-Directive/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/NamitaMalik/Auto-Scroll-To-Directive/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="auto-scroll-to-directive" class="anchor" href="#auto-scroll-to-directive" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Auto-Scroll-To Directive</h1>

<p>While working on one of my recent projects I encountered a situation where I had to <strong>scroll</strong> to a particular element on a page. This was easily achieved using the <strong>$anchorScroll</strong> service in <strong>angularJS</strong>. It simply checks the current value of <strong>$location.hash()</strong> and <strong>scroll</strong>s to the related element.</p>

<p>You must be thinking what exactly is <strong>$anchorScroll</strong>? What is <strong>$location.hash()</strong>? How does <strong>$anchorScroll</strong> works?</p>

<p>Let's go ahead:</p>

<p><strong>$location</strong> is a <strong>service</strong> in <strong>angularJS</strong> which exposes the current URL in the address bar so that it can be observed or manipulated. It represents the <strong>URL</strong> object as set of methods protocol, host, port, path, search, hash.</p>

<p><strong>hash()</strong> method sets/returns the anchor part of the <strong>URL</strong>. Anchor basically refers to internal section of the web document.</p>

<p><strong>$anchorScroll</strong> watches <strong>$location.hash()</strong> and automatically <strong>scroll</strong>s to match any anchor whenever it changes.</p>

<p>It's time for some action now. Have a look at the piece of HTML given below:</p>

<div class="highlight highlight-text-html-basic"><pre>&lt;!DOCTYPE html&gt;
&lt;<span class="pl-ent">html</span> <span class="pl-e">ng-app</span>=<span class="pl-s"><span class="pl-pds">"</span>myApp<span class="pl-pds">"</span></span>&gt;
&lt;<span class="pl-ent">head</span> <span class="pl-e">lang</span>=<span class="pl-s"><span class="pl-pds">"</span>en<span class="pl-pds">"</span></span>&gt;
    &lt;<span class="pl-ent">meta</span> <span class="pl-e">charset</span>=<span class="pl-s"><span class="pl-pds">"</span>UTF-8<span class="pl-pds">"</span></span>&gt;
    &lt;<span class="pl-ent">title</span>&gt;My Page&lt;/<span class="pl-ent">title</span>&gt;
&lt;/<span class="pl-ent">head</span>&gt;
&lt;<span class="pl-ent">body</span>&gt;
&lt;<span class="pl-ent">div</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>FirstDiv<span class="pl-pds">"</span></span>&gt;
    &lt;<span class="pl-ent">h1</span>&gt;Section 1&lt;/<span class="pl-ent">h1</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
&lt;/<span class="pl-ent">div</span>&gt;
&lt;<span class="pl-ent">div</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>SecondDiv<span class="pl-pds">"</span></span>&gt;
    &lt;<span class="pl-ent">h1</span>&gt;Section 2&lt;/<span class="pl-ent">h1</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
&lt;/<span class="pl-ent">div</span>&gt;
&lt;<span class="pl-ent">div</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>ThirdDiv<span class="pl-pds">"</span></span>&gt;
    &lt;<span class="pl-ent">h1</span>&gt;Section 3&lt;/<span class="pl-ent">h1</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
&lt;/<span class="pl-ent">div</span>&gt;
&lt;<span class="pl-ent">div</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>FourthDiv<span class="pl-pds">"</span></span>&gt;
    &lt;<span class="pl-ent">h1</span>&gt;Section 4&lt;/<span class="pl-ent">h1</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
&lt;/<span class="pl-ent">div</span>&gt;
&lt;<span class="pl-ent">div</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>FifthDiv<span class="pl-pds">"</span></span> <span class="pl-e">auto-scroll-to</span>=<span class="pl-s"><span class="pl-pds">"</span>FifthDiv<span class="pl-pds">"</span></span>&gt;
    &lt;<span class="pl-ent">h1</span>&gt;Section 5&lt;/<span class="pl-ent">h1</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
&lt;/<span class="pl-ent">div</span>&gt;
&lt;<span class="pl-ent">div</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>SixthDiv<span class="pl-pds">"</span></span>&gt;
    &lt;<span class="pl-ent">h1</span>&gt;Section 6&lt;/<span class="pl-ent">h1</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
&lt;/<span class="pl-ent">div</span>&gt;
&lt;<span class="pl-ent">div</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>SeventhDiv<span class="pl-pds">"</span></span>&gt;
    &lt;<span class="pl-ent">h1</span>&gt;Section 7&lt;/<span class="pl-ent">h1</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
&lt;/<span class="pl-ent">div</span>&gt;
&lt;<span class="pl-ent">div</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>EighthDiv<span class="pl-pds">"</span></span>&gt;
    &lt;<span class="pl-ent">h1</span>&gt;Section 8&lt;/<span class="pl-ent">h1</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
    &lt;<span class="pl-ent">br</span>&gt;
&lt;/<span class="pl-ent">div</span>&gt;
&lt;<span class="pl-ent">script</span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>angular.min.js<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;
&lt;<span class="pl-ent">script</span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>autoScrollTo.js<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;
&lt;/<span class="pl-ent">body</span>&gt;
&lt;/<span class="pl-ent">html</span>&gt;</pre></div>

<p>Now, suppose we want that every time we land to the 'myPage.html', it should automatically <strong>scroll</strong> to section 5 of the page. As explained above, this can be easily achieved using the <strong>anchorScroll()</strong> <strong>service</strong> of <strong>Angular</strong>. But what if tomorrow same requirement comes up for some other web page. Since <strong>scrolling</strong> to a particular section on a page is a very common use case, therefore I thought of making a <strong>directive</strong> so that it can be used wherever and whenever required.</p>

<p>Here we go:</p>

<div class="highlight highlight-source-js"><pre>(<span class="pl-k">function</span> (<span class="pl-smi">ng</span>) {
    <span class="pl-s"><span class="pl-pds">'</span>use strict<span class="pl-pds">'</span></span>;
    <span class="pl-k">var</span> app <span class="pl-k">=</span> <span class="pl-smi">ng</span>.<span class="pl-en">module</span>(<span class="pl-s"><span class="pl-pds">'</span>myApp<span class="pl-pds">'</span></span>, []);
    <span class="pl-smi">app</span>.<span class="pl-en">directive</span>(<span class="pl-s"><span class="pl-pds">'</span>autoScrollTo<span class="pl-pds">'</span></span>, [<span class="pl-s"><span class="pl-pds">'</span>$location<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>$anchorScroll<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>$timeout<span class="pl-pds">'</span></span>, <span class="pl-k">function</span> (<span class="pl-smi">$location</span>, <span class="pl-smi">$anchorScroll</span>, <span class="pl-smi">$timeout</span>) {
        <span class="pl-k">return</span> {
            restrict<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>A<span class="pl-pds">'</span></span>,
            scope<span class="pl-k">:</span> <span class="pl-c1">false</span>,
            <span class="pl-en">link</span><span class="pl-k">:</span> <span class="pl-k">function</span> (<span class="pl-smi">scope</span>, <span class="pl-smi">elem</span>, <span class="pl-smi">attr</span>) {
                <span class="pl-c">//code to scroll on the basis of provided id</span>
                <span class="pl-en">$timeout</span>(<span class="pl-k">function</span> () {
                    <span class="pl-smi">$location</span>.<span class="pl-c1">hash</span>(<span class="pl-smi">attr</span>.<span class="pl-smi">autoScrollTo</span>);
                    <span class="pl-en">$anchorScroll</span>();
                });
            }
        }
    }]);
}(angular));</pre></div>

<p>In the above <strong>JavaScript</strong> snippet we have basically done the following:</p>

<ol>
<li>Defined a <strong>directive</strong> named as <strong>autoScrollTo</strong>.</li>
<li>While declaring the <strong>directive</strong>, we have also declared the dependencies : <strong>$location</strong> , <strong>$timeout</strong> and <strong>$anchorScroll</strong>.</li>
<li>We would be using this <strong>directive</strong> as an attribute of the element, hence we have given <strong>restrict</strong> property as <code>A</code>. In case you want to have deeper understanding on how to make custom <strong>directive</strong>s, please have a look at this very informative <a href="http://codechutney.in/blog/angularjs/component-in-angularjs/">blog by Amit Thakkar</a>.</li>
<li>Then, there is a <strong>link</strong> <strong>function</strong> which is executed while attaching the template to the DOM. <strong>Link</strong> <strong>function</strong> basically has  parameters:

<ol>
<li>
<strong>scope</strong> - <strong>angular</strong> <strong>scope</strong> object</li>
<li>
<strong>element</strong> - jqLite-wrapped element that this <strong>directive</strong> matches</li>
<li>
<strong>attribute</strong> - hash object with key-value pairs of normalized <strong>attribute</strong> names and their corresponding <strong>attribute</strong> values</li>
</ol>
</li>
<li>
<p>We have placed our code for <strong>scrolling</strong> into a self executing function and we have applied a delay using <strong>$timeout</strong>.</p>

<blockquote>
<p>You must be thinking that we have forgotten to specify the time of delay. Well, we have deliberately not mentioned the delay time as omitting the delay time defaults it to <code>0</code>. But the code block contained in it is executed only after <code>DOM</code> has been manipulated by Angular and after the browser renders.</p>
</blockquote>
</li>
<li>Then we have used <strong>$location.hash()</strong> to specify the element to which we need to automatically <strong>scroll</strong>. We know that attribute would give us the value of the corresponding <strong>attribute</strong>, so we are finding here the value of the <strong>autoScrollTo</strong> <strong>attribute</strong> which was placed in the <code>div</code> with id <code>FifthDiv</code>.</li>
<li>And then, off course in the end we have used our <strong>$anchorScroll()</strong> <strong>service</strong> to <strong>scroll</strong> to the part of the page, defined through <strong>$location.hash()</strong> method.</li>
</ol>

<p>Your <strong>autoScrollTo</strong> <strong>directive</strong> is now ready to use anywhere!</p>

<h2>
<a id="follow-me" class="anchor" href="#follow-me" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Follow Me</h2>

<p><a href="https://github.com/NamitaMalik">Github</a></p>

<p><a href="https://twitter.com/namita13_04">Twitter</a></p>

<p><a href="https://in.linkedin.com/in/namita-malik-a7885b23">LinkedIn</a></p>

<p><a href="https://namitamalik.github.io/">More Blogs By Me</a></p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/NamitaMalik/Auto-Scroll-To-Directive">Auto-Scroll-To Directive</a> is maintained by <a href="https://github.com/NamitaMalik">NamitaMalik</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
